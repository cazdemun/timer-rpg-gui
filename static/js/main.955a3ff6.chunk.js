(this["webpackJsonpmaster-timer-alarm-gui"]=this["webpackJsonpmaster-timer-alarm-gui"]||[]).push([[0],{194:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(5),r=n(1),c=n(7),i=n(349),l=n(350),u=n(348),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-.8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.28,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.02,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2,i=e.length<1;if(i)throw new Error("History must contain at least one element");var l=e.reduce((function(e,t){return e&&0<=t&&t<=5}),!0);if(!l)throw new Error("Range allowed is 0 - 5");var u=e.reduce((function(e,t){return t>=3?e+1:0}),0);if(0===u)return"1";if(1===u)return"1";var o=e.reduce((function(e,t){return e+(n+a*t+r*t*t)}),0),s=t*Math.pow(Math.max(1.3,2.5+o),c*u);return(3*s/4).toFixed(2)},s=function(e,t){return Object(i.a)(Object(l.a)(Object(u.a)(e,"yyyy-MM-dd",new Date),{days:t}),"yyyy-MM-dd")},d=function(e,t){return[o([3]),o([3,3]),o([3,3,3]),o([3,3,3,3]),o([3,3,3,3,3])].reduce((function(e,t){var n=e.slice(-1),a=Object(c.a)(n,1)[0],r=s(a,parseInt(t));return e.concat([r])}),[e]).reduce((function(e,n){return Object(r.a)(Object(r.a)({},e),{},Object(a.a)({},n,[{type:"success",content:t}]))}),{})};n.c[n.s]}).call(this,n(332)(e))},245:function(e,t,n){},347:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(45),l=n.n(i),u=(n(245),n(7)),o=(n(246),n(365)),s=n(363),d=n(358),j=n(100),b=n(54),O=n.n(b),m=n(75),x=n(1),v=n(46),f=n.n(v),h=n(368),y=n(369),g=n(370),p=n(371),E=n(367),k=n(372),D=n(354),S=n(355),A=n(236),T=n(51),_=n(360),C=n(362),M=n(356),w=n(195),I=n(125),L=n(88),P=n(359),R=n(232),F=n(361),U=n(35),N=n(348),J=n(352),V=n(353),B=n(26),H=n(29),q=n(218),G=n.n(q),W=function(){function e(t){Object(B.a)(this,e),this.db=void 0,this.db=new G.a({filename:t,autoload:!0})}return Object(H.a)(e,[{key:"find",value:function(e){var t=this;return new Promise((function(n,a){t.db.find(e,(function(e,t){e?a(e):n(t)}))}))}},{key:"insert",value:function(e){var t=this;return new Promise((function(n,a){t.db.insert(e,(function(e,t){e?a(e):n(t)}))}))}},{key:"update",value:function(e,t){var n=this;return new Promise((function(a,r){n.db.update({_id:e},{$set:Object(x.a)({},t)},{},(function(t,n){t?r(new Error("Updating realm with value: ".concat(e," - ").concat(t.message))):a(n)}))}))}},{key:"delete",value:function(e){var t=this;return new Promise((function(n,a){t.db.remove({_id:e},{multi:!0},(function(t,r){t?a(new Error("Deleting realm with value: ".concat(e," - ").concat(t.message))):n(r)}))}))}}]),e}(),Y=n(10),z=(a=!0,function(e){return function(t){return a&&console.log(e,t),t}}),X=new W("alarms"),K="HH:mm",Q="yyyy-MM-DD",$=function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);for(var a="#",r=0;r<3;r++){a+="00".concat((t>>8*r&255).toString(16)).substr(-2)}return a},Z=function(e){return[{title:"Id",dataIndex:"_id",key:"name",render:function(e){return"".concat(e.substr(0,5),"...")},width:50},{title:"Task",dataIndex:"task",key:"task",render:function(e){return Object(Y.jsx)(D.a,{gutter:[16,16],children:"queue"===e.type?e.value.map((function(e,t){return{key:t,name:e}})).map((function(e){return Object(Y.jsx)(S.a,{span:6,children:Object(Y.jsx)(A.a,{color:$(e.name),children:e.name.substr(0,7)})},e.key)})):Object(Y.jsx)(S.a,{span:6,children:Object(Y.jsx)(A.a,{color:$(e.value),children:e.value.substr(0,7)})})})},width:320},{title:"Start",dataIndex:"start",key:"start",sorter:{compare:function(e,t){return(n=K,function(e,t){var a=Object(N.a)(e,n,new Date),r=Object(N.a)(t,n,new Date);return Object(J.a)(a,r)?0:Object(V.a)(a,r)?1:-1})(e.start,t.start);var n},multiple:2}},{title:"End",dataIndex:"end",key:"end"},{title:"Weekdays",dataIndex:"weekdays",key:"weekdays",render:function(e){return"".concat(e.join(","))},filters:[{text:"Su",value:0},{text:"M",value:1},{text:"Tu",value:2},{text:"W",value:3},{text:"Th",value:4},{text:"F",value:5},{text:"Sa",value:6}],onFilter:function(e,t){return 0===t.weekdays.length||t.weekdays.includes(e)}},{title:"Operation",dataIndex:"operation",render:function(t,n){return Object(Y.jsxs)(D.a,{children:[Object(Y.jsx)(T.a,{icon:Object(Y.jsx)(h.a,{}),onClick:function(){return e("OPEN_EDIT_ALARM_MODAL",{data:{alarm:z("OPEN_EDIT_ALARM_MODAL")(n)}})}}),Object(Y.jsx)(T.a,{icon:Object(Y.jsx)(y.a,{}),onClick:function(){return e("DELETE_ALARM",{data:{alarmId:z("DELETE_ALARM")(n._id)}})}}),Object(Y.jsx)(T.a,{icon:Object(Y.jsx)(g.a,{}),onClick:function(){return e("DUPLICATE_ALARM",{data:{alarm:z("DUPLICATE_ALARM")(Object(x.a)(Object(x.a)({},n),{},{key:void 0,_id:void 0}))}})}})]})},width:150}]},ee=Object(o.a)({key:"light",initial:"loading",context:{alarms:[],alarmToEdit:void 0},states:{loading:{invoke:{src:function(){return X.find({})},onDone:{target:"idle",actions:Object(U.b)((function(e,t){return{alarms:z("loading")(t.data)}}))}}},idle:{on:{CREATE_ALARM:"creating",DELETE_ALARM:"deletingService",DUPLICATE_ALARM:"duplicatingService",OPEN_EDIT_ALARM_MODAL:{target:"editing",actions:Object(U.b)((function(e,t){return{alarmToEdit:z("idle")(t.data.alarm)}}))}}},creating:{invoke:{src:function(){return X.insert({start:"06:00",end:"07:00",weekdays:[]}).then(z("creating")).then((function(){return X.find({})}))},onDone:{target:"idle",actions:Object(U.b)((function(e,t){return{alarms:z("creating")(t.data)}}))}}},editing:{on:{EDIT_ALARM:"editingService",CLOSE_ALARM_MODAL:"idle"}},editingService:{invoke:{src:function(e,t){return X.update(t.data.alarm._id,t.data.alarm)},onDone:"loading"}},deletingService:{invoke:{src:function(e,t){return X.delete(t.data.alarmId)},onDone:"loading"}},duplicatingService:{invoke:{src:function(e,t){return X.insert(t.data.alarm).then(z("creating")).then((function(){return X.find({})}))},onDone:{target:"idle",actions:Object(U.b)((function(e,t){return{alarms:z("creating")(t.data)}}))}}}}}),te=function(e){var t,n,a,c,i,l,o,s,d,j,b,v,h,y=e.current,g=e.send,k=_.a.useForm(),D=Object(u.a)(k,1)[0],S=Object(r.useState)(null!==(t=null===(n=y.context.alarmToEdit)||void 0===n||null===(a=n.task)||void 0===a?void 0:a.type)&&void 0!==t?t:"timer"),A=Object(u.a)(S,2),P=A[0],R=A[1],F=z("initialValues")(Object(x.a)(Object(x.a)({},y.context.alarmToEdit),{},{task:null!==(c=null===(i=y.context.alarmToEdit)||void 0===i||null===(l=i.task)||void 0===l?void 0:l.type)&&void 0!==c?c:"timer",taskValue:null!==(o=null===(s=y.context.alarmToEdit)||void 0===s||null===(d=s.task)||void 0===d?void 0:d.value)&&void 0!==o?o:"",start:(null===(j=y.context.alarmToEdit)||void 0===j?void 0:j.start)?f()(y.context.alarmToEdit.start,K):void 0,end:(null===(b=y.context.alarmToEdit)||void 0===b?void 0:b.end)?f()(y.context.alarmToEdit.end,K):void 0,startDate:(null===(v=y.context.alarmToEdit)||void 0===v?void 0:v.startDate)?f()(y.context.alarmToEdit.startDate,Q):void 0,endDate:(null===(h=y.context.alarmToEdit)||void 0===h?void 0:h.endDate)?f()(y.context.alarmToEdit.endDate,Q):void 0})),U={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},N={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},J=[{value:"fitness",label:"Exercise"},{value:"work",label:"Work"},{value:"worklite",label:"Work Lite"},{value:"focus",label:"Focus"},{value:"life",label:"Life Management"},{value:"studies",label:"Studies"},{value:"inspiration",label:"Inspiration"},{value:"chores",label:"Chores"},{value:"music",label:"Music"},{value:"salsa",label:"Salsa time"},{value:"reggae",label:"Regueton"},{value:"politics",label:"Politics"},{value:"Meditation",label:"Meditation"}];return Object(Y.jsx)(C.a,{visible:y.matches("editing"),onOk:function(){D.validateFields().then((function(e){var t,n,a,r,c,i,l,u;D.resetFields(),console.log(e);var o=z("validateFields")(Object(x.a)(Object(x.a)(Object(x.a)({},y.context.alarmToEdit),e),{},{task:{type:e.task,value:e.taskValue},start:null!==(t=null===(n=e.start)||void 0===n?void 0:n.format(K))&&void 0!==t?t:void 0,end:null!==(a=null===(r=e.end)||void 0===r?void 0:r.format(K))&&void 0!==a?a:void 0,startDate:null!==(c=null===(i=e.startDate)||void 0===i?void 0:i.format(Q))&&void 0!==c?c:void 0,endDate:null!==(l=null===(u=e.endDate)||void 0===u?void 0:u.format(Q))&&void 0!==l?l:void 0,taskValue:void 0,key:void 0}));g("EDIT_ALARM",{data:{alarm:o}})})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return g("CLOSE_ALARM_MODAL")},children:Object(Y.jsxs)(_.a,{name:"basic",form:D,labelCol:{span:4},wrapperCol:{span:20},initialValues:F,autoComplete:"off",children:[Object(Y.jsx)(_.a.Item,{label:"Start",name:"start",rules:[{required:!0,message:"Please input you a start time!"}],children:Object(Y.jsx)(M.a,{})}),Object(Y.jsx)(_.a.Item,{label:"End",name:"end",children:Object(Y.jsx)(M.a,{})}),Object(Y.jsx)(_.a.Item,{label:"Start Date",name:"startDate",children:Object(Y.jsx)(w.a,{})}),Object(Y.jsx)(_.a.Item,{label:"End Date",name:"endDate",children:Object(Y.jsx)(w.a,{})}),Object(Y.jsx)(_.a.Item,{label:"Weekdays",name:"weekdays",children:Object(Y.jsx)(I.a.Group,{options:[{value:0,label:"Su"},{value:1,label:"M"},{value:2,label:"Tu"},{value:3,label:"W"},{value:4,label:"Th"},{value:5,label:"F"},{value:6,label:"Sa"}]})}),Object(Y.jsx)(_.a.Item,{label:"Task type",name:"task",children:Object(Y.jsxs)(L.a,{style:{width:150},onChange:function(e){return R(e)},children:[Object(Y.jsx)(L.a.Option,{value:"timer",children:"Timer"}),Object(Y.jsx)(L.a.Option,{value:"queue",children:"Queue"})]})}),"timer"===P?Object(Y.jsx)(_.a.Item,{label:"Value",name:"taskValue",rules:[{required:!0,message:"Please input a value!"}],children:Object(Y.jsx)(L.a,{style:{width:150},children:J.map((function(e){return Object(Y.jsx)(L.a.Option,{value:e.value,children:e.label},e.value)}))})}):Object(Y.jsx)(_.a.List,{name:"taskValue",rules:[{validator:function(){var e=Object(m.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&!(n.length<1)){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("At least one timer")));case 2:return e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:function(e,t,n){var a=t.add,c=t.remove,i=n.errors;return Object(Y.jsxs)(Y.Fragment,{children:[e.map((function(t,n){return Object(r.createElement)(_.a.Item,Object(x.a)(Object(x.a)({},0===n?U:N),{},{label:0===n?"Values":"",required:!1,key:t.key}),Object(Y.jsx)(_.a.Item,Object(x.a)(Object(x.a)({},t),{},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Please input a value!"}],noStyle:!0,children:Object(Y.jsx)(L.a,{style:{width:"60%",marginRight:"5px"},children:J.map((function(e){return Object(Y.jsx)(L.a.Option,{value:e.value,children:e.label},e.value)}))})})),e.length>1?Object(Y.jsx)(p.a,{className:"dynamic-delete-button",onClick:function(){return c(t.name)}}):null)})),Object(Y.jsxs)(_.a.Item,{children:[Object(Y.jsx)(T.a,{type:"dashed",onClick:function(){return a()},style:{width:"60%"},icon:Object(Y.jsx)(E.a,{}),children:"Add field"}),Object(Y.jsx)(_.a.ErrorList,{errors:i})]})]})}})]})})},ne=function(){var e=Object(s.a)(ee),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(Y.jsxs)(d.a,{children:[n.matches("editing")?Object(Y.jsx)(te,{current:n,send:a}):null,Object(Y.jsxs)(D.a,{children:[Object(Y.jsxs)(S.a,{span:24,children:[Object(Y.jsx)(D.a,{justify:"end",children:Object(Y.jsx)(T.a,{icon:Object(Y.jsx)(k.a,{}),onClick:function(){return a("CREATE_ALARM")}})}),Object(Y.jsx)(P.a,{dataSource:n.context.alarms.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{key:e._id})})),columns:Z(a)})]}),Object(Y.jsxs)(S.a,{span:24,children:[Object(Y.jsx)(D.a,{justify:"end",children:Object(Y.jsx)(T.a,{icon:Object(Y.jsx)(g.a,{}),onClick:function(){R.b.success("Database was successfully copied \ud83c\udf89"),navigator.clipboard.writeText(n.context.alarms.map((function(e){return JSON.stringify(e)})).join("\n"))}})}),Object(Y.jsx)("pre",{children:n.context.alarms.map((function(e){return JSON.stringify(e)})).join("\n")})]}),Object(Y.jsx)(S.a,{span:24,children:Object(Y.jsxs)(_.a,{onFinish:function(e){console.log(e.data.split("\n").map((function(e){return JSON.parse(e)}))),e.data.split("\n").map((function(e){return JSON.parse(e)})).map((function(e){return X.insert(e)}))},children:[Object(Y.jsx)(D.a,{justify:"end",children:Object(Y.jsx)(T.a,{icon:Object(Y.jsx)(g.a,{}),htmlType:"submit"})}),Object(Y.jsx)(_.a.Item,{name:"data",children:Object(Y.jsx)(F.a.TextArea,{style:{height:"50%",minHeight:"300px"}})})]})})]})]})},ae=n(364),re=n(366),ce=n(225),ie=n(194),le=new W("studyobj"),ue={name:"Nameless Study Object",start:f()().format("yyyy-MM-DD"),toc:[]},oe=Object(o.a)({key:"scheduler",initial:"loading",context:{studyObjects:[],currentStudyObject:ue},states:{loading:{invoke:{src:function(){return le.find({})},onDone:{target:"idle",actions:Object(U.b)((function(e,t){return{studyObjects:t.data}}))}}},idle:{on:{SAVE_STUDY_OBJECT:{target:"savingStudyObject",actions:Object(U.b)((function(e,t){return{currentStudyObject:t.data.studyObject}}))},LOAD_STUDY_OBJECT:{target:"loading",actions:Object(U.b)((function(e,t){return{currentStudyObject:t.data.studyObject}}))},CREATE_NEW_STUDY_OBJECT:{target:"idle",actions:Object(U.b)((function(e,t){return{currentStudyObject:ue}}))},DELETE_STUDY_OBJECT:{target:"deletingService",actions:Object(U.b)((function(e,t){return{currentStudyObject:ue}}))}}},savingStudyObject:{invoke:{src:function(e){return e.currentStudyObject._id?le.update(e.currentStudyObject._id,e.currentStudyObject):le.insert(e.currentStudyObject)},onDone:"loading"}},deletingService:{invoke:{src:function(e,t){return le.delete(t.data.studyObjectId)},onDone:"loading"}}}}),se=function(e){var t=e.getListData,n=Object(r.useState)(f()()),a=Object(u.a)(n,2),c=a[0],i=a[1];return Object(Y.jsxs)(S.a,{children:[Object(Y.jsxs)(D.a,{justify:"end",children:[Object(Y.jsx)(T.a,{onClick:function(){return i(f()(c).add(-1,"M"))},children:"<"}),Object(Y.jsx)(T.a,{onClick:function(){return i(f()(c).add(1,"M"))},children:">"})]}),Object(Y.jsx)(re.a,{value:c,onChange:function(e){return i(e)},onPanelChange:function(e){return i(e)},dateCellRender:function(e){var n,a=null!==(n=t(e))&&void 0!==n?n:[];return Object(Y.jsx)("ul",{children:a.map((function(e){return Object(Y.jsx)("li",{style:{listStyle:"none"},children:Object(Y.jsx)(ae.a,{status:e.type,text:e.content})},e.content)}))})}})]})},de=function(){var e,t,n=Object(s.a)(oe),a=Object(u.a)(n,2),r=a[0],c=a[1];return Object(Y.jsxs)(d.a,{children:[Object(Y.jsxs)(D.a,{gutter:16,children:[Object(Y.jsx)(S.a,{sm:24,md:12,style:{height:"500px"},children:r.matches("idle")?Object(Y.jsxs)(_.a,{initialValues:{name:r.context.currentStudyObject.name,start:f()(r.context.currentStudyObject.start,"yyyy-MM-DD"),toc:r.context.currentStudyObject.toc.join("\n")},onFinish:function(e){c("SAVE_STUDY_OBJECT",{data:{studyObject:Object(x.a)(Object(x.a)({},r.context.currentStudyObject),{},{name:e.name,start:e.start.format("yyyy-MM-DD"),toc:e.toc.split("\n")})}})},children:[Object(Y.jsx)(_.a.Item,{name:"name",rules:[{required:!0}],children:Object(Y.jsx)(F.a,{})}),Object(Y.jsx)(_.a.Item,{name:"start",rules:[{required:!0}],children:Object(Y.jsx)(w.a,{})}),Object(Y.jsx)(_.a.Item,{name:"toc",rules:[{required:!0}],children:Object(Y.jsx)(F.a.TextArea,{style:{height:"50%",minHeight:"300px"}})}),Object(Y.jsx)(D.a,{justify:"end",children:Object(Y.jsx)(T.a,{htmlType:"submit",children:r.context.currentStudyObject._id?"Update/Schedule":"Create/Schedule"})})]}):Object(Y.jsx)(ce.a,{size:"large"})}),Object(Y.jsx)(S.a,{sm:24,md:12,children:Object(Y.jsx)(P.a,{dataSource:r.context.studyObjects.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{key:e._id})})),onRow:function(e){return{onClick:function(){e._id!==r.context.currentStudyObject._id&&c("LOAD_STUDY_OBJECT",{data:{studyObject:e}})}}},pagination:{pageSize:5},columns:[{title:"Name",dataIndex:"name",key:"name"},{title:"Start",dataIndex:"start",key:"start"},{title:"Operation",dataIndex:"operation",render:function(e,t){return Object(Y.jsx)(D.a,{children:Object(Y.jsx)(T.a,{icon:Object(Y.jsx)(y.a,{}),onClick:function(){return c("DELETE_STUDY_OBJECT",{data:{studyObjectId:t._id}})}})})},width:100}]})})]}),Object(Y.jsx)(D.a,{gutter:16,children:Object(Y.jsx)(S.a,{span:24,children:Object(Y.jsx)(se,{getListData:(e=r.context.currentStudyObject.toc,t=r.context.currentStudyObject.start,function(n){if(0===e.length)return[];var a=n.format("yyyy-MM-DD");return e.map((function(e,n){var a=Object(ie.a)(t,n);return Object(ie.b)(a,e)})).reduce((function(e,t){return Object.keys(t).forEach((function(n){var a;e[n]=(null!==(a=e[n])&&void 0!==a?a:[]).concat(t[n])})),e}),{})[a]})})})})]})},je=d.a.Header,be=d.a.Footer,Oe=d.a.Content,me=Object(o.a)({key:"navigation",initial:"indexSchedulerPage",context:{},states:{alarmPage:{},realmPage:{},indexSchedulerPage:{}},on:{TO_ALARM_PAGE:"alarmPage",TO_REALM_PAGE:"realmPage",TO_INDEX_SCHEDULER_PAGE:"indexSchedulerPage"}});var xe=function(){var e=Object(s.a)(me),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(Y.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(Y.jsxs)(je,{children:[Object(Y.jsx)("div",{className:"logo"}),Object(Y.jsxs)(j.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:[Object(Y.jsx)(j.a.Item,{onClick:function(){return a("TO_ALARM_PAGE")},children:"Alarms"},"0"),Object(Y.jsx)(j.a.Item,{onClick:function(){return a("TO_REALM_PAGE")},children:"Realms"},"1"),Object(Y.jsx)(j.a.Item,{onClick:function(){return a("TO_INDEX_SCHEDULER_PAGE")},children:"Index Scheduler"},"2")]})]}),Object(Y.jsx)(Oe,{style:{padding:"50px 50px",minHeight:"100%"},children:function(){switch(n.value){case"alarmPage":return Object(Y.jsx)(ne,{});case"realmPage":return Object(Y.jsx)("div",{children:"hola"});case"indexSchedulerPage":return Object(Y.jsx)(de,{});default:return Object(Y.jsx)(Y.Fragment,{})}}()}),Object(Y.jsx)(be,{style:{textAlign:"center"},children:"Ant Design \xa92018 Created by Ant UED"})]})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,373)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};l.a.render(Object(Y.jsx)(c.a.StrictMode,{children:Object(Y.jsx)(xe,{})}),document.getElementById("root")),ve()}},[[347,1,2]]]);
//# sourceMappingURL=main.955a3ff6.chunk.js.map