(this["webpackJsonpmaster-timer-alarm-gui"]=this["webpackJsonpmaster-timer-alarm-gui"]||[]).push([[0],{194:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(5),r=n(1),i=n(7),c=n(348),l=n(349),u=n(347),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-.8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.28,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.02,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2,c=e.length<1;if(c)throw new Error("History must contain at least one element");var l=e.reduce((function(e,t){return e&&0<=t&&t<=5}),!0);if(!l)throw new Error("Range allowed is 0 - 5");var u=e.reduce((function(e,t){return t>=3?e+1:0}),0);if(0===u)return"1";if(1===u)return"1";var o=e.reduce((function(e,t){return e+(n+a*t+r*t*t)}),0),s=t*Math.pow(Math.max(1.3,2.5+o),i*u);return(3*s/4).toFixed(2)},s=function(e,t){return Object(c.a)(Object(l.a)(Object(u.a)(e,"yyyy-MM-dd",new Date),{days:t}),"yyyy-MM-dd")},d=function(e,t){return[o([3]),o([3,3]),o([3,3,3]),o([3,3,3,3]),o([3,3,3,3,3])].reduce((function(e,t){var n=e.slice(-1),a=Object(i.a)(n,1)[0],r=s(a,parseInt(t));return e.concat([r])}),[e]).reduce((function(e,n){return Object(r.a)(Object(r.a)({},e),{},Object(a.a)({},n,[{type:"success",content:t}]))}),{})};n.c[n.s]}).call(this,n(331)(e))},244:function(e,t,n){},346:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(45),l=n.n(c),u=(n(244),n(7)),o=n(54),s=n.n(o),d=n(75),j=n(1),b=n(46),O=n.n(b),m=n(26),x=n(29),v=n(218),f=n.n(v),h=function(){function e(t){Object(m.a)(this,e),this.db=void 0,this.db=new f.a({filename:t,autoload:!0})}return Object(x.a)(e,[{key:"find",value:function(e){var t=this;return new Promise((function(n,a){t.db.find(e,(function(e,t){e?a(e):n(t)}))}))}},{key:"insert",value:function(e){var t=this;return new Promise((function(n,a){t.db.insert(e,(function(e,t){e?a(e):n(t)}))}))}},{key:"update",value:function(e,t){var n=this;return new Promise((function(a,r){n.db.update({_id:e},{$set:Object(j.a)({},t)},{},(function(t,n){t?r(new Error("Updating realm with value: ".concat(e," - ").concat(t.message))):a(n)}))}))}},{key:"delete",value:function(e){var t=this;return new Promise((function(n,a){t.db.remove({_id:e},{multi:!0},(function(t,r){t?a(new Error("Deleting realm with value: ".concat(e," - ").concat(t.message))):n(r)}))}))}}]),e}(),y=n(347),g=n(352),p=n(353),E=n(365),k=n(35),D=n(363),A=n(236),S=n(354),T=n(51),_=n(360),w=n(362),C=n(355),M=n(195),L=n(125),I=n(88),P=n(357),R=n(358),F=n(359),N=n(232),V=n(361),U=n(368),J=n(369),H=n(370),q=n(371),B=n(367),G=n(372),W=n(10),Y=new h("alarms"),z="HH:mm",X="yyyy-MM-DD",K=function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);for(var a="#",r=0;r<3;r++){a+=("00"+(t>>8*r&255).toString(16)).substr(-2)}return a},Q=function(e){return[{title:"Id",dataIndex:"_id",key:"name",render:function(e){return"".concat(e.substr(0,5),"...")},width:50},{title:"Task",dataIndex:"task",key:"task",render:function(e){return e?Object(W.jsx)(W.Fragment,{children:"queue"===e.type?e.value.map((function(e,t){return Object(W.jsx)(A.a,{color:K(e),children:e},t)})):Object(W.jsx)(A.a,{color:K(e.value),children:e.value})}):""},width:320},{title:"Start",dataIndex:"start",key:"start",sorter:{compare:function(e,t){return(n=z,function(e,t){var a=Object(y.a)(e,n,new Date),r=Object(y.a)(t,n,new Date);return Object(g.a)(a,r)?0:Object(p.a)(a,r)?1:-1})(e.start,t.start);var n},multiple:2}},{title:"End",dataIndex:"end",key:"end"},{title:"Weekdays",dataIndex:"weekdays",key:"weekdays",render:function(e){return"".concat(e.join(","))},filters:[{text:"Su",value:0},{text:"M",value:1},{text:"Tu",value:2},{text:"W",value:3},{text:"Th",value:4},{text:"F",value:5},{text:"Sa",value:6}],onFilter:function(e,t){return 0===t.weekdays.length||t.weekdays.includes(e)}},{title:"Operation",dataIndex:"operation",render:function(t,n){return Object(W.jsxs)(S.a,{children:[Object(W.jsx)(T.a,{icon:Object(W.jsx)(U.a,{}),onClick:function(){return e("OPEN_EDIT_ALARM_MODAL",{data:{alarm:Z("OPEN_EDIT_ALARM_MODAL")(n)}})}}),Object(W.jsx)(T.a,{icon:Object(W.jsx)(J.a,{}),onClick:function(){return e("DELETE_ALARM",{data:{alarmId:Z("DELETE_ALARM")(n._id)}})}}),Object(W.jsx)(T.a,{icon:Object(W.jsx)(H.a,{}),onClick:function(){return e("DUPLICATE_ALARM",{data:{alarm:Z("DUPLICATE_ALARM")(Object(j.a)(Object(j.a)({},n),{},{key:void 0,_id:void 0}))}})}})]})},width:150}]},$=Object(E.a)({key:"light",initial:"loading",context:{alarms:[],alarmToEdit:void 0},states:{loading:{invoke:{src:function(){return Y.find({})},onDone:{target:"idle",actions:Object(k.b)((function(e,t){return{alarms:Z("loading")(t.data)}}))}}},idle:{on:{CREATE_ALARM:"creating",DELETE_ALARM:"deletingService",DUPLICATE_ALARM:"duplicatingService",OPEN_EDIT_ALARM_MODAL:{target:"editing",actions:Object(k.b)((function(e,t){return{alarmToEdit:Z("idle")(t.data.alarm)}}))}}},creating:{invoke:{src:function(){return Y.insert({start:"06:00",end:"07:00",value:"test",weekdays:[]}).then(Z("creating")).then((function(e){return Y.find({})}))},onDone:{target:"idle",actions:Object(k.b)((function(e,t){return{alarms:Z("creating")(t.data)}}))}}},editing:{on:{EDIT_ALARM:"editingService",CLOSE_ALARM_MODAL:"idle"}},editingService:{invoke:{src:function(e,t){return Y.update(t.data.alarm._id,t.data.alarm)},onDone:"loading"}},deletingService:{invoke:{src:function(e,t){return Y.delete(t.data.alarmId)},onDone:"loading"}},duplicatingService:{invoke:{src:function(e,t){return Y.insert(t.data.alarm).then(Z("creating")).then((function(e){return Y.find({})}))},onDone:{target:"idle",actions:Object(k.b)((function(e,t){return{alarms:Z("creating")(t.data)}}))}}}}}),Z=(a=!0,function(e){return function(t){if(a)return console.log(e,t),t}}),ee=function(e){var t,n,a,i,c,l,o,b,m,x,v,f,h,y=e.current,g=e.send,p=_.a.useForm(),E=Object(u.a)(p,1)[0],k=Object(r.useState)(null!==(t=null===(n=y.context.alarmToEdit)||void 0===n||null===(a=n.task)||void 0===a?void 0:a.type)&&void 0!==t?t:"timer"),D=Object(u.a)(k,2),A=D[0],S=D[1],P=Z("initialValues")(Object(j.a)(Object(j.a)({},y.context.alarmToEdit),{},{task:null!==(i=null===(c=y.context.alarmToEdit)||void 0===c||null===(l=c.task)||void 0===l?void 0:l.type)&&void 0!==i?i:"timer",taskValue:null!==(o=null===(b=y.context.alarmToEdit)||void 0===b||null===(m=b.task)||void 0===m?void 0:m.value)&&void 0!==o?o:"",start:(null===(x=y.context.alarmToEdit)||void 0===x?void 0:x.start)?O()(y.context.alarmToEdit.start,z):void 0,end:(null===(v=y.context.alarmToEdit)||void 0===v?void 0:v.end)?O()(y.context.alarmToEdit.end,z):void 0,startDate:(null===(f=y.context.alarmToEdit)||void 0===f?void 0:f.startDate)?O()(y.context.alarmToEdit.startDate,X):void 0,endDate:(null===(h=y.context.alarmToEdit)||void 0===h?void 0:h.endDate)?O()(y.context.alarmToEdit.endDate,X):void 0})),R={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},F={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},N=[{value:"fitness",label:"Exercise"},{value:"work",label:"Work"},{value:"worklite",label:"Work Lite"},{value:"focus",label:"Focus"},{value:"life",label:"Life Management"},{value:"studies",label:"Studies"},{value:"inspiration",label:"Inspiration"},{value:"chores",label:"Chores"},{value:"music",label:"Music"},{value:"salsa",label:"Salsa time"},{value:"reggae",label:"Regueton"},{value:"politics",label:"Politics"}];return Object(W.jsx)(w.a,{visible:y.matches("editing"),onOk:function(){E.validateFields().then((function(e){var t,n,a,r,i,c,l,u;E.resetFields(),console.log(e);var o=Z("validateFields")(Object(j.a)(Object(j.a)(Object(j.a)({},y.context.alarmToEdit),e),{},{task:{type:e.task,value:e.taskValue},start:null!==(t=null===(n=e.start)||void 0===n?void 0:n.format(z))&&void 0!==t?t:void 0,end:null!==(a=null===(r=e.end)||void 0===r?void 0:r.format(z))&&void 0!==a?a:void 0,startDate:null!==(i=null===(c=e.startDate)||void 0===c?void 0:c.format(X))&&void 0!==i?i:void 0,endDate:null!==(l=null===(u=e.endDate)||void 0===u?void 0:u.format(X))&&void 0!==l?l:void 0,taskValue:void 0,key:void 0,value:void 0}));g("EDIT_ALARM",{data:{alarm:o}})})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return g("CLOSE_ALARM_MODAL")},children:Object(W.jsxs)(_.a,{name:"basic",form:E,labelCol:{span:4},wrapperCol:{span:20},initialValues:P,autoComplete:"off",children:[Object(W.jsx)(_.a.Item,{label:"Start",name:"start",rules:[{required:!0,message:"Please input you a start time!"}],children:Object(W.jsx)(C.a,{})}),Object(W.jsx)(_.a.Item,{label:"End",name:"end",children:Object(W.jsx)(C.a,{})}),Object(W.jsx)(_.a.Item,{label:"Start Date",name:"startDate",children:Object(W.jsx)(M.a,{})}),Object(W.jsx)(_.a.Item,{label:"End Date",name:"endDate",children:Object(W.jsx)(M.a,{})}),Object(W.jsx)(_.a.Item,{label:"Weekdays",name:"weekdays",children:Object(W.jsx)(L.a.Group,{options:[{value:0,label:"Su"},{value:1,label:"M"},{value:2,label:"Tu"},{value:3,label:"W"},{value:4,label:"Th"},{value:5,label:"F"},{value:6,label:"Sa"}]})}),Object(W.jsx)(_.a.Item,{label:"Task type",name:"task",children:Object(W.jsxs)(I.a,{style:{width:150},onChange:function(e){return S(e)},children:[Object(W.jsx)(I.a.Option,{value:"timer",children:"Timer"}),Object(W.jsx)(I.a.Option,{value:"queue",children:"Queue"})]})}),"timer"===A?Object(W.jsx)(_.a.Item,{label:"Value",name:"taskValue",rules:[{required:!0,message:"Please input a value!"}],children:Object(W.jsx)(I.a,{style:{width:150},children:N.map((function(e){return Object(W.jsx)(I.a.Option,{value:e.value,children:e.label},e.value)}))})}):Object(W.jsx)(_.a.List,{name:"taskValue",rules:[{validator:function(){var e=Object(d.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&!(n.length<1)){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("At least one timer")));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:function(e,t,n){var a=t.add,i=t.remove,c=n.errors;return Object(W.jsxs)(W.Fragment,{children:[e.map((function(t,n){return Object(r.createElement)(_.a.Item,Object(j.a)(Object(j.a)({},0===n?R:F),{},{label:0===n?"Values":"",required:!1,key:t.key}),Object(W.jsx)(_.a.Item,Object(j.a)(Object(j.a)({},t),{},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Please input a value!"}],noStyle:!0,children:Object(W.jsx)(I.a,{style:{width:"60%",marginRight:"5px"},children:N.map((function(e){return Object(W.jsx)(I.a.Option,{value:e.value,children:e.label},e.value)}))})})),e.length>1?Object(W.jsx)(q.a,{className:"dynamic-delete-button",onClick:function(){return i(t.name)}}):null)})),Object(W.jsxs)(_.a.Item,{children:[Object(W.jsx)(T.a,{type:"dashed",onClick:function(){return a()},style:{width:"60%"},icon:Object(W.jsx)(B.a,{}),children:"Add field"}),Object(W.jsx)(_.a.ErrorList,{errors:c})]})]})}})]})})},te=function(){var e=Object(D.a)($),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(W.jsxs)(P.a,{children:[n.matches("editing")?Object(W.jsx)(ee,{current:n,send:a}):null,Object(W.jsxs)(S.a,{children:[Object(W.jsxs)(R.a,{span:24,children:[Object(W.jsx)(S.a,{justify:"end",children:Object(W.jsx)(T.a,{icon:Object(W.jsx)(G.a,{}),onClick:function(){return a("CREATE_ALARM")}})}),Object(W.jsx)(F.a,{dataSource:n.context.alarms.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{key:e._id})})),columns:Q(a)})]}),Object(W.jsxs)(R.a,{span:24,children:[Object(W.jsx)(S.a,{justify:"end",children:Object(W.jsx)(T.a,{icon:Object(W.jsx)(H.a,{}),onClick:function(){N.b.success("Database was successfully copied \ud83c\udf89"),navigator.clipboard.writeText(n.context.alarms.map((function(e){return JSON.stringify(e)})).join("\n"))}})}),Object(W.jsx)("pre",{children:n.context.alarms.map((function(e){return JSON.stringify(e)})).join("\n")})]}),Object(W.jsx)(R.a,{span:24,children:Object(W.jsxs)(_.a,{onFinish:function(e){console.log(e.data.split("\n").map((function(e){return JSON.parse(e)}))),e.data.split("\n").map((function(e){return JSON.parse(e)})).map((function(e){return Y.insert(e)}))},children:[Object(W.jsx)(S.a,{justify:"end",children:Object(W.jsx)(T.a,{icon:Object(W.jsx)(H.a,{}),htmlType:"submit"})}),Object(W.jsx)(_.a.Item,{name:"data",children:Object(W.jsx)(V.a.TextArea,{style:{height:"50%",minHeight:"300px"}})})]})})]})]})},ne=(n(330),n(100)),ae=n(364),re=n(366),ie=n(225),ce=n(194),le=new h("studyobj"),ue={name:"Nameless Study Object",start:O()().format("yyyy-MM-DD"),toc:[]},oe=Object(E.a)({key:"scheduler",initial:"loading",context:{studyObjects:[],currentStudyObject:ue},states:{loading:{invoke:{src:function(){return le.find({})},onDone:{target:"idle",actions:Object(k.b)((function(e,t){return{studyObjects:t.data}}))}}},idle:{on:{SAVE_STUDY_OBJECT:{target:"savingStudyObject",actions:Object(k.b)((function(e,t){return{currentStudyObject:t.data.studyObject}}))},LOAD_STUDY_OBJECT:{target:"loading",actions:Object(k.b)((function(e,t){return{currentStudyObject:t.data.studyObject}}))},CREATE_NEW_STUDY_OBJECT:{target:"idle",actions:Object(k.b)((function(e,t){return{currentStudyObject:ue}}))}}},savingStudyObject:{invoke:{src:function(e){return e.currentStudyObject._id?le.update(e.currentStudyObject._id,e.currentStudyObject):le.insert(e.currentStudyObject)},onDone:"loading"}}}}),se=function(e){var t=e.getListData,n=Object(r.useState)(O()()),a=Object(u.a)(n,2),i=a[0],c=a[1];return Object(W.jsxs)(R.a,{children:[Object(W.jsxs)(S.a,{justify:"end",children:[Object(W.jsx)(T.a,{onClick:function(){return c(O()(i).add(-1,"M"))},children:"<"}),Object(W.jsx)(T.a,{onClick:function(){return c(O()(i).add(1,"M"))},children:">"})]}),Object(W.jsx)(re.a,{value:i,onChange:function(e){return c(e)},onPanelChange:function(e){return c(e)},dateCellRender:function(e){var n,a=null!==(n=t(e))&&void 0!==n?n:[];return Object(W.jsx)("ul",{children:a.map((function(e){return Object(W.jsx)("li",{style:{listStyle:"none"},children:Object(W.jsx)(ae.a,{status:e.type,text:e.content})},e.content)}))})}})]})},de=function(){var e,t,n=Object(D.a)(oe),a=Object(u.a)(n,2),r=a[0],i=a[1];return Object(W.jsxs)(P.a,{children:[Object(W.jsxs)(S.a,{gutter:16,children:[Object(W.jsx)(R.a,{sm:24,md:12,style:{height:"500px"},children:r.matches("idle")?Object(W.jsxs)(_.a,{initialValues:{name:r.context.currentStudyObject.name,start:O()(r.context.currentStudyObject.start,"yyyy-MM-DD"),toc:r.context.currentStudyObject.toc.join("\n")},onFinish:function(e){i("SAVE_STUDY_OBJECT",{data:{studyObject:Object(j.a)(Object(j.a)({},r.context.currentStudyObject),{},{name:e.name,start:e.start.format("yyyy-MM-DD"),toc:e.toc.split("\n")})}})},children:[Object(W.jsx)(_.a.Item,{name:"name",rules:[{required:!0}],children:Object(W.jsx)(V.a,{})}),Object(W.jsx)(_.a.Item,{name:"start",rules:[{required:!0}],children:Object(W.jsx)(M.a,{})}),Object(W.jsx)(_.a.Item,{name:"toc",rules:[{required:!0}],children:Object(W.jsx)(V.a.TextArea,{style:{height:"50%",minHeight:"300px"}})}),Object(W.jsx)(S.a,{justify:"end",children:Object(W.jsx)(T.a,{htmlType:"submit",children:"Schedule"})})]}):Object(W.jsx)(ie.a,{size:"large"})}),Object(W.jsx)(R.a,{sm:24,md:12,children:Object(W.jsx)(F.a,{dataSource:r.context.studyObjects.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{key:e._id})})),onRow:function(e){return{onClick:function(t){e._id!==r.context.currentStudyObject._id&&i("LOAD_STUDY_OBJECT",{data:{studyObject:e}})}}},pagination:{pageSize:5},columns:[{title:"Name",dataIndex:"name",key:"name"},{title:"Start",dataIndex:"start",key:"start"}]})})]}),Object(W.jsx)(S.a,{gutter:16,children:Object(W.jsx)(R.a,{span:24,children:Object(W.jsx)(se,{getListData:(e=r.context.currentStudyObject.toc,t=r.context.currentStudyObject.start,function(n){if(0===e.length)return[];var a=n.format("yyyy-MM-DD");return e.map((function(e,n){var a=Object(ce.a)(t,n);return Object(ce.b)(a,e)})).reduce((function(e,t){return Object.keys(t).forEach((function(n){var a;e[n]=(null!==(a=e[n])&&void 0!==a?a:[]).concat(t[n])})),e}),{})[a]})})})})]})},je=P.a.Header,be=P.a.Footer,Oe=P.a.Content,me=Object(E.a)({key:"navigation",initial:"indexSchedulerPage",context:{},states:{alarmPage:{},realmPage:{},indexSchedulerPage:{}},on:{TO_ALARM_PAGE:"alarmPage",TO_REALM_PAGE:"realmPage",TO_INDEX_SCHEDULER_PAGE:"indexSchedulerPage"}});var xe=function(){var e=Object(D.a)(me),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(W.jsxs)(P.a,{style:{minHeight:"100vh"},children:[Object(W.jsxs)(je,{children:[Object(W.jsx)("div",{className:"logo"}),Object(W.jsxs)(ne.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:[Object(W.jsx)(ne.a.Item,{onClick:function(){return a("TO_ALARM_PAGE")},children:"Alarms"},"0"),Object(W.jsx)(ne.a.Item,{onClick:function(){return a("TO_REALM_PAGE")},children:"Realms"},"1"),Object(W.jsx)(ne.a.Item,{onClick:function(){return a("TO_INDEX_SCHEDULER_PAGE")},children:"Index Scheduler"},"2")]})]}),Object(W.jsx)(Oe,{style:{padding:"50px 50px",minHeight:"100%"},children:function(){switch(n.value){case"alarmPage":return Object(W.jsx)(te,{});case"realmPage":return Object(W.jsx)("div",{children:"hola"});case"indexSchedulerPage":return Object(W.jsx)(de,{})}}()}),Object(W.jsx)(be,{style:{textAlign:"center"},children:"Ant Design \xa92018 Created by Ant UED"})]})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,373)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};l.a.render(Object(W.jsx)(i.a.StrictMode,{children:Object(W.jsx)(xe,{})}),document.getElementById("root")),ve()}},[[346,1,2]]]);
//# sourceMappingURL=main.b5f0c44d.chunk.js.map